# k-aura-stabilizer

Front‑end Vue app with a Node.js helper that streams audio generated by a
local [ComfyUI](https://github.com/comfyanonymous/ComfyUI) instance through
an FFmpeg filter chain.

## Prerequisites

- Node.js 20+
- npm

## Setup

1. Install dependencies:
   ```bash
   npm install
   ```
2. (Optional) copy `.env.example` to `.env` and adjust `VUE_APP_BASE_URL` or
   other settings as needed.

## Development

- Front‑end dev server: `npm run dev` (http://localhost:8080)
- Audio backend: `npm run api` (http://localhost:3000)

## COMFY & FFmpeg

The backend calls a ComfyUI server to synthesize audio then pipes it through
`fluent-ffmpeg` with the bundled `ffmpeg-static` binary. Filters apply
compression, a high‑pass, echo and limiter before outputting AAC at 128 kbps.

By default it connects to `127.0.0.1:8188`. Point to another host with the
`COMFY_HOST` environment variable:

```bash
COMFY_HOST=192.168.1.50:8188 npm run api
```

## Docker

`docker-compose.yml` includes an `ffmpeg-worker` service that supplies FFmpeg
binaries for transcoding. Build and start everything with:

```bash
docker compose up --build
```

## Tests

Integration tests for the backend live in `backend/test/`. Run them with:

```bash
npm test
```

## Storage

The project does not persist data on the server. Audio is streamed directly
from ComfyUI to the client and discarded after playback. Client‑side storage
is not implemented beyond what the browser provides.

